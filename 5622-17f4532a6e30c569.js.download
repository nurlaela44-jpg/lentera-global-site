"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5622],{2207:(e,t,a)=>{a.d(t,{f:()=>i});var r=a(9381);a(10689);var s=a(54392),n=a(51024);let i=e=>{let{membershipType:t,daysRemainingOnTrial:a,feature:i="this feature",onUpgradeClick:l}=e;if(t!==s.V.FREE&&t!==s.V.FREE_TRIAL)return null;let o=async()=>{l?await l():window.location.href="/dashboard?tab=settings"},d=t===s.V.FREE_TRIAL,c=a?"Your Pro trial ends in ".concat(a," day").concat(1===a?"":"s"):"Your Pro trial ends soon",u=d?d&&a&&a<=7?"Your ".concat(i," Trial Ends Soon"):"Upgrade to Keep Using ".concat(i):void 0,h=d?"".concat(c,". Upgrade to continue using ").concat(i,", unlimited completions, MAX Mode, and more after your trial ends."):void 0;return(0,r.jsx)(n._,{title:u,description:h,onClick:o,buttonText:d?"Upgrade to Pro":"Start 14-day Free Trial",featureName:i})}},8231:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(9381);function s(e){return(0,r.jsxs)("div",{className:"dashboard-subSection",id:e.idToScrollTo,children:[(0,r.jsx)("div",{className:"dashboard-subSection-list"+(e.hideOverflow?" dashboard-subSection-list-hide-overflow":""),children:e.children}),e.trailingCaption&&(0,r.jsx)("div",{className:"dashboard-subSection-trailing-caption",children:e.trailingCaption})]})}a(10689),a(35371)},8236:(e,t,a)=>{a.d(t,{bi:()=>N,qc:()=>w});var r=a(9381),s=a(51673),n=a(90037),i=a(89888),l=a(24977),o=a(23899),d=a(69181),c=a(80085),u=a.n(c),h=a(81798),m=a(10689),x=a(54392),b=a(56301),p=a(40021),g=a(2207),y=a(12061),f=a(44114);function v(e){let{id:t,title:a,description:s,completed:n,isLoading:i,error:l,onRetry:o,content:d,expanded:c,onToggle:u,showDivider:h=!0}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 py-4 ".concat(d&&!i?"cursor-pointer":""),onClick:()=>{d&&!i&&u&&u(t)},children:[i?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-brand-gray-300 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat(l?"bg-[#BF616A] border-[#BF616A]":n?"bg-[#81A1C1] border-[#81A1C1]":"border-brand-gray-300"),children:l?(0,r.jsx)("span",{className:"text-black text-sm",children:"!"}):n?(0,r.jsx)("svg",{className:"w-3 h-3 text-brand-neutrals-800",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):null}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:a}),(!n||c)&&(0,r.jsx)("div",{className:"text-xs text-brand-gray-500",children:s})]}),l&&o&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer hover:text-gray-300 transition-colors border border-gray-700 rounded-md px-2 py-1",onClick:e=>{e.stopPropagation(),o()},children:[(0,r.jsx)(f.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Try Again"})]})]}),c&&d&&!i&&(0,r.jsx)("div",{className:"pl-8 pb-4",children:d})]}),h&&(0,r.jsx)("hr",{className:"border-brand-neutrals-100 dark:border-brand-neutrals-800"})]})}let w=e=>e===n.acM.OWNER||e===n.acM.FREE_OWNER;function j(e){var t;let{integrationName:a,integrationIcon:s,setupCompleteMessage:c,introMessage:f,checklistItems:j,status:N,onStartUsing:k,startUsingText:C="Start Using Background Agents",analyticsData:S}=e,_=null!=(t=(0,h.useParams)().locale)?t:"",{teams:A,isLoading:E,stripeStatus:I,hardLimit:T,usageSettingsError:R,isUsagePricingLoading:O,createCheckoutUrl:L,updateHardLimit:P}=(0,y.M)(),[F,M]=(0,m.useState)({}),[B,J]=(0,m.useState)(!1),[D,U]=(0,m.useState)(!1),[q,G]=(0,m.useState)(!1),Y=(0,m.useRef)(null),V=(0,m.useMemo)(()=>["$50","$100","$200","$500"],[]),[Q,W]=(0,m.useState)(V[0]),[K,z]=(0,m.useState)(null),$=(0,m.useCallback)(e=>{W(e),"Custom"!==e&&z(null)},[]),H=(0,m.useCallback)(e=>{e>1e5?z(1e5):z(e),W("Custom")},[]),X=(0,m.useCallback)(async()=>{try{let e=50;e="Custom"===Q?K||50:parseInt(Q.replace("$",""))||50,await P(e),M({})}catch(e){console.error("Failed to enable usage-based pricing:",e)}},[Q,K,P]),Z=(0,m.useCallback)(()=>{M({})},[]),ee=A.find(e=>e.seats>0),et=ee&&w(ee.role),ea=ee&&!w(ee.role),{privacyMode:er,isLoading:es,error:en,refreshPrivacyMode:ei}=function(){let[e,t]=(0,m.useState)(null),[a,r]=(0,m.useState)(!0),[s,i]=(0,m.useState)(null),l=async()=>{try{r(!0),i(null);let e=await fetch("/api/dashboard/get-user-privacy-mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(new n.KoG({inferredPrivacyMode:n.YTt.UNSPECIFIED}))});if(!e.ok)throw Error("HTTP error ".concat(e.status));let a=n.mWk.fromJson(await e.json());t(a.privacyMode)}catch(e){i(e instanceof Error?e.message:"Failed to fetch privacy mode"),console.error("Error fetching user privacy mode:",e)}finally{r(!1)}};return(0,m.useEffect)(()=>{l()},[]),{privacyMode:e,isLoading:a,error:s,refreshPrivacyMode:l}}(),el=er===n.YTt.NO_STORAGE,eo="no-usage-based"!==T&&null!=T,ed=async()=>{if(!D){U(!0);try{let e=await L({tier:"pro"});window.location.href=e}catch(e){console.error("[Upgrade] Error creating checkout URL:",e),U(!1)}}},ec=e=>{J(!0),M(t=>({[e]:!t[e]}))},eu=(0,m.useCallback)(async()=>{window.location.reload()},[]),eh=(0,m.useCallback)(async()=>{await ei()},[ei]),em=el||q;el&&!q&&G(!0);let ex=(0,m.useMemo)(()=>{let e=[...j];return I.membershipType!==x.V.FREE_TRIAL&&-1===e.findIndex(e=>"enable-usage-pricing"===e.id)&&e.push({id:"enable-usage-pricing",title:"Enable Usage Based Pricing",description:"Background Agents require usage-based pricing",completed:eo,isLoading:O,error:R,onRetry:eu,content:(0,r.jsx)(b.V,{stripeStatus:I,limitOptions:V,selectedLimit:Q,customValue:K,handleLimitSelect:$,handleCustomLimitChange:H,onCancel:Z,onEnable:X})}),em&&-1===e.findIndex(e=>"update-privacy-mode"===e.id)&&e.push({id:"update-privacy-mode",title:"Update Privacy Mode",description:"Background Agents require code storage",completed:!el,isLoading:es,error:en,onRetry:eh,content:el&&ea?(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,r.jsx)(d.A,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(i.o5,{variant:"p3-mono",className:"text-amber-800 dark:text-amber-200",children:"Code storage must be enabled to use Background Agents. Please contact your admin to switch from Privacy Mode (Legacy) to Privacy Mode."})})]})}):(0,r.jsx)("div",{className:"pl-4",children:(0,r.jsx)(p.X,{team:ee,useModal:!0,showCurrentMode:!0,onModalSuccess:()=>{ei()},removeBackgroundColor:!0,skipConfirmation:!0})})}),e},[j,I,eo,O,R,eu,V,Q,K,$,H,Z,X,em,el,es,en,eh,ea,ee,ei]);(0,m.useEffect)(()=>{if(ex.some(e=>e.isLoading)||es||O)return;let e={};ex.forEach(t=>{e[t.id]=t.completed});let t=Y.current&&Object.keys(e).some(t=>!Y.current[t]&&e[t]),a=ex.find(e=>!e.completed&&!e.isLoading);(!B||t)&&(a?M({[a.id]:!0}):M({})),Y.current=e},[B,ex,es,O,j]),(0,m.useEffect)(()=>{let e=()=>{if("hidden"===document.visibilityState&&S){let e={};ex.forEach(t=>{e[t.id]=t.completed});let t=JSON.stringify(new n.HOD({checkpoints:e,privacyMode:null!==er?er:void 0,isTeamAdmin:!!et,isLoading:j.some(e=>e.isLoading),isPrivacyModeLoading:es,isGithubLoading:!1,isUsagePricingLoading:O,...S}));if(navigator.sendBeacon){let e=new Blob([t],{type:"application/json"});navigator.sendBeacon("/api/dashboard/log-slackbot-auth-conversion-funnel",e)}}};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[ex,er,et,es,O,S,j]);let eb=ex.every(e=>e.completed);return E?(0,r.jsx)("section",{className:"page container flex min-h-screen justify-center",children:(0,r.jsx)("div",{className:"mx-4 w-full max-w-sm md:max-w-[39.5rem]",children:(0,r.jsx)(l.Z,{className:"flex w-full flex-col gap-4 px-4 py-6 md:gap-6 md:px-8 md:py-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-brand-gray-300 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Verifying your Background Agent setup..."})]})})})}):(0,r.jsx)("section",{className:"page container flex min-h-screen justify-center",children:(0,r.jsx)("div",{className:"mx-4 w-full max-w-sm md:max-w-[39.5rem] py-6 md:py-10",children:(0,r.jsxs)("div",{className:"w-full space-y-6",children:["loading"===N&&(0,r.jsxs)("div",{children:["Connecting ",a,"..."]}),"error"===N&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)(i.DZ,{as:"h1",variant:"subheading-1-alt",className:"text-balance",children:["Error connecting to ",a,". Please try again later."]}),(0,r.jsx)("hr",{className:"border-brand-neutrals-100 dark:border-brand-neutrals-800 my-6"}),(0,r.jsxs)(i.o5,{variant:"p2-mono-alt",className:"text-balance text-brand-gray-600",children:["For any issues, reach out at"," ",(0,r.jsx)(u(),{href:"mailto:hi@cursor.com",className:"underline underline-offset-2 transition-opacity duration-300 hover:opacity-75",children:(0,r.jsx)("b",{children:"hi@cursor.com"})})]})]}),"success"===N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-7 h-7 bg rounded-xl overflow-hidden",children:(0,r.jsx)("img",{src:"/cursor-logo.png",alt:"Cursor",className:"w-7 h-7 object-contain mix-blend-multiply dark:mix-blend-normal"})}),(0,r.jsx)("div",{className:"w-3 h-px bg-brand-neutrals-300 dark:bg-brand-neutrals-700"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-9 h-9 rounded-lg",children:s})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.DZ,{as:"h1",variant:"subheading-2",className:"text-balance",children:"Finish Setting Up Background Agents"}),(0,r.jsx)(i.o5,{variant:"p3-mono",className:"text-brand-gray-600 mt-2",children:f})]}),I.membershipType===x.V.FREE?(0,r.jsx)(g.f,{membershipType:I.membershipType,daysRemainingOnTrial:I.daysRemainingOnTrial,feature:"Background Agents",onUpgradeClick:ed}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-0",children:ex.map((e,t)=>(0,r.jsx)(v,{...e,expanded:F[e.id],onToggle:ec,showDivider:t<ex.length-1},e.id))}),(0,r.jsxs)("div",{className:"space-y-2 pt-4",children:[k?(0,r.jsx)(o.Button,{onClick:k,disabled:!eb,className:"w-full h-10 text-sm font-medium rounded-md transition-opacity ".concat(eb?"bg-black dark:bg-white text-white dark:text-black hover:opacity-80":"cursor-not-allowed"),style:eb?void 0:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"rgba(204, 204, 204, 0.44)"},children:C}):eb&&(0,r.jsx)("div",{className:"text-center py-2",children:(0,r.jsx)(i.o5,{variant:"p3-mono",className:"text-[#81A1C1] font-medium",children:c})}),(0,r.jsx)(o.Button,{onClick:()=>{window.location.href=_?"/".concat(_,"/dashboard?tab=background-agents"):"/dashboard?tab=background-agents"},variant:"secondary",className:"w-full h-10 bg-transparent text-brand-gray-800 dark:text-brand-gray-800 text-sm font-medium rounded-md transition-colors hover:bg-brand-neutrals-50 dark:hover:bg-brand-neutrals-900",children:"View All Settings"})]})]})]})]})})})}function N(e){let{user:t,isLoading:a,error:n}=(0,s.Jd)();return((0,m.useEffect)(()=>{if(n||!a&&!t){let e=encodeURIComponent(new URL(window.location.href).toString());window.location.href="/api/auth/login?redirect_uri=".concat(e)}},[t,n,a]),a)?(0,r.jsx)("section",{className:"page container flex min-h-screen justify-center",children:(0,r.jsx)("div",{className:"mx-4 w-full max-w-sm md:max-w-[39.5rem]",children:(0,r.jsx)(l.Z,{className:"flex w-full flex-col gap-4 px-4 py-6 md:gap-6 md:px-8 md:py-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-brand-gray-300 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Verifying your Background Agent setup..."})]})})})}):n||!t?(0,r.jsx)("section",{className:"page container flex min-h-screen justify-center",children:(0,r.jsx)("div",{className:"mx-4 w-full max-w-sm md:max-w-[39.5rem]",children:(0,r.jsx)(l.Z,{className:"flex w-full flex-col gap-4 px-4 py-6 md:gap-6 md:px-8 md:py-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-brand-gray-300 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Redirecting to login..."})]})})})}):(0,r.jsx)(y.q,{children:(0,r.jsx)(j,{...e})})}},13715:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(9381);a(10689);var s=a(37095);let n=e=>{let{className:t,...a}=e;return(0,r.jsx)("input",{className:(0,s.cn)("h-9 text-base/[1.5rem] -tracking-1 outline-0 md:h-12 md:tracking-0","rounded-lg border border-brand-neutrals-300 bg-transparent p-3 text-brand-foreground caret-brand-foreground placeholder:text-[#9F9F9F] autofill:shadow-[0_0_0px_1000px_theme(colors.brand.neutrals.100/50%)_inset] focus:outline focus:outline-2 focus:outline-brand-foreground disabled:cursor-not-allowed disabled:bg-brand-neutrals-50 disabled:text-[#9F9F9F] dark:border-brand-neutrals-800 dark:autofill:shadow-[0_0_0px_1000px_theme(colors.brand.neutrals.900/100%)_inset] dark:disabled:bg-brand-light-black md:px-5",t),...a})};n.displayName="Input"},19462:(e,t,a)=>{a.d(t,{x:()=>s});var r=a(9381);function s(e){return(0,r.jsxs)("div",{className:"dashboard-section-header",children:[(0,r.jsxs)("div",{className:"dashboard-section-header-leading-items",children:[(0,r.jsx)("div",{className:"dashboard-section-header-label",children:e.label}),e.description&&(0,r.jsx)("div",{className:"dashboard-section-header-description",children:e.description})]}),(0,r.jsx)("div",{className:"dashboard-section-header-trailing-items",children:e.trailingItems})]})}},24977:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(9381),s=a(97098),n=a(10689),i=a(37095);let l=(0,s.F)("rounded-xl border border-brand-neutrals-100 bg-brand-white text-brand-foreground dark:border-brand-neutrals-800 dark:bg-brand-medium-black dark:shadow-none",{variants:{variant:{default:"shadow-[0px_51px_20px_rgba(186,186,186,0.01),0px_29px_17px_rgba(186,186,186,0.05),0px_13px_13px_rgba(186,186,186,0.09),0px_3px_7px_rgba(186,186,186,0.1)]",flat:"",dashboard:"border-0 bg-brand-dashboard-card p-6 dark:bg-brand-dashboard-card"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)(l({variant:s}),a),...n})});o.displayName="Card"},25289:(e,t,a)=>{a.d(t,{w:()=>n});var r=a(9381),s=a(19462);function n(e){return(0,r.jsxs)("div",{className:"dashboard-section",children:[e.label&&(0,r.jsx)(s.x,{label:e.label,description:e.description,trailingItems:e.headerTrailingActions}),(0,r.jsx)("div",{className:"dashboard-section-list",children:e.children})]})}},28790:(e,t,a)=>{a.d(t,{j:()=>s});var r=a(9381);a(35371);let s=e=>{let{leadingIcon:t,trailingIcon:a,children:s,className:n="",disabled:i,size:l="base",color:o="default",...d}=e;return(0,r.jsxs)("button",{className:"dashboard-outline-button ".concat("default"!==o?"dashboard-outline-button-".concat(o):""," ").concat("medium"===l?"dashboard-outline-button-medium":""," ").concat(n),disabled:i,...d,children:[t&&(0,r.jsx)("span",{className:"dashboard-outline-button-icon",children:t}),s&&(0,r.jsx)("span",{className:"dashboard-outline-button-text",children:s}),a&&(0,r.jsx)("span",{className:"dashboard-outline-button-icon",children:a})]})}},34896:(e,t,a)=>{a.d(t,{K:()=>i});var r=a(9381),s=a(37095);let n={sm:"h-3 w-3",md:"h-5 w-5"},i=e=>{let{size:t="md",className:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-spin rounded-full border-2 border-brand-gray-300 border-t-transparent",n[t],a)})}},40021:(e,t,a)=>{a.d(t,{X:()=>w});var r=a(9381),s=a(90037),n=a(10689),i=a(34441),l=a(99651),o=a(20503),d=a(43693),c=a(28790),u=a(34896),h=a(64372),m=a(41300),x=a(80586),b=a(95612),p=a(25289),g=a(8231),y=a(76160);let f=e=>[{id:s.YTt.NO_TRAINING,label:"Privacy Mode",description:"No training. Code stored for Background Agent and other features.",features:["Code is not used for training","Code stored for Background Agent and other features","Full feature availability"]},{id:s.YTt.USAGE_CODEBASE_TRAINING_ALLOWED,label:"Share Data",description:"Code data is shared to help improve Cursor.",features:["Full feature availability","Help Cursor improve the product by sharing code, prompts, and usage data","Data may be used to improve Cursor's product for everyone"]},{id:s.YTt.NO_STORAGE,label:"Privacy Mode (Legacy)",description:"No training or storage. Disables Background Agent and other features that require code storage.",features:["Code is not used for training or stored","Background Agent will be disabled","Limited feature availability"],showInCollapsible:!0}],v=[],w=e=>{var t,a,w,j,N,k,C,S,_,A,E,I;let{team:T,viewerRole:R,useModal:O=!1,showCurrentMode:L=!1,onModalSuccess:P,removeBackgroundColor:F=!1,skipConfirmation:M=!1,shouldOpenPrivacy:B=!1}=e,[J,D]=(0,n.useState)(!1),[U,q]=(0,n.useState)(null),[G,Y]=(0,n.useState)(!1),[V,Q]=(0,n.useState)(null),[W,K]=(0,n.useState)(""),[z,$]=(0,n.useState)(!1),{teamPrivacyMode:H,isLoadingPrivacyMode:X,fetchTeamPrivacyMode:Z,setTeamPrivacyMode:ee,isOnLegacyPrivacyMode:et,fetchIsOnLegacyPrivacyMode:ea,setIsOnLegacyPrivacyMode:er}=(0,m.U)(T),{userPrivacyMode:es,isLoadingPrivacyMode:en,hoursRemainingInGracePeriod:ei,isEnforcedByTeam:el,fetchUserPrivacyMode:eo,updateUserPrivacyMode:ed,isNotMigratedToServerSourceOfTruth:ec}=(0,x.W)(),{needsMigration:eu,isLoading:eh}=(0,h.s)(),em=(0,n.useCallback)(()=>{let e;return(null==T?void 0:T.id)?null!==H?H:(null==T?void 0:T.privacyModeForced)===!1?s.YTt.USAGE_CODEBASE_TRAINING_ALLOWED:s.YTt.NO_STORAGE:(e=null!==es?es:s.YTt.NO_STORAGE)===s.YTt.USAGE_DATA_TRAINING_ALLOWED?s.YTt.USAGE_CODEBASE_TRAINING_ALLOWED:e},[T,H,es]),ex=()=>{let e=em(),t=f(!!(null==T?void 0:T.id));return t.find(t=>t.id===e)||t[0]},eb=()=>U&&f(!!(null==T?void 0:T.id)).find(e=>e.id===U)||null,ep=()=>!!U&&(et||U!==em()),eg=()=>(()=>{let e=eb();return(null==e?void 0:e.showInCollapsible)===!0})(),ey=async e=>{Y(!0),Q(null);try{if(null==T?void 0:T.id){let n=await fetch("/api/dashboard/switch-team-privacy-mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(new s.SmK({teamId:T.id,privacyMode:e}).toJson())});if(!n.ok){var t,a,r;throw Error(null!=(r=null==(a=await n.json())||null==(t=a.error)?void 0:t.message)?r:"HTTP error ".concat(n.status))}console.log("[Privacy Mode] Team privacy mode successfully changed to",e),ee(e),await Z(),er(!1),await ea()}else{if(!await ed(e))throw Error("Failed to update user privacy mode");console.log("[Privacy Mode] User privacy mode successfully changed to",e),await eo()}Y(!1),D(!1),q(null),Q(null),K(""),P&&P()}catch(e){console.error("[Privacy Mode] Error changing privacy mode:",e),Q("".concat(e)),Y(!1)}},ef=(e=>e===s.acM.OWNER||e===s.acM.FREE_OWNER)(R),ev=(null==T?void 0:T.id)?X:en;return((0,n.useEffect)(()=>{if(B&&!ev&&((null==T?void 0:T.id)?ef&&!v.includes(null==T?void 0:T.id):!el)){D(!0);let e=new URL(window.location.href);e.searchParams.delete("openPrivacy"),window.history.replaceState({},"",e.toString())}},[B,ev,null==T?void 0:T.id,ef,el]),(0,n.useEffect)(()=>{!J||U||et||q(em())},[em,et,J,U]),!T&&(ei>0||ec))?(0,r.jsx)(p.w,{label:"Privacy",children:(0,r.jsx)(g.A,{children:(0,r.jsx)(b.J,{label:"Privacy Mode Setting",description:"Configure your privacy settings in the Cursor desktop app",trailingItems:!i.Fr&&(0,r.jsx)(c.j,{onClick:()=>{let e="localhost"===window.location.hostname;window.location.href="".concat(e?"cursor-dev":"cursor","://anysphere.cursor-deeplink/settings")},children:"Open Cursor App"})})})}):O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("div",{className:"".concat(F?"rounded-lg pt-2":"bg-brand-dashboard-card rounded-lg p-4"),children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:L?ex().label:"Privacy Mode Settings"}),(0,r.jsx)("div",{className:"text-xs text-brand-gray-400 leading-tight",children:L?ex().description:"Configure how Cursor handles your data"})]}),(0,r.jsx)("button",{onClick:()=>{et?window.location.href="/dashboard?tab=settings":D(!0)},className:"flex w-fit items-center gap-1.5 rounded-md border border-brand-borders px-3 py-1.5 text-xs text-white transition duration-150 ease hover:bg-white/[0.04]",children:"Configure Privacy"})]})})}),(0,r.jsxs)(y.zf,{show:J,onClose:()=>{D(!1),q(null),Q(null),K("")},title:"Privacy Settings",description:(0,r.jsxs)(r.Fragment,{children:["Choose how Cursor stores and uses data. Read more about privacy modes in our"," ",(0,r.jsx)("a",{href:"/privacy",target:"_blank",className:"text-brand-blue-300",children:"Privacy Policy"})]}),children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{U&&(q(null),K(""))},disabled:!U,className:"flex w-full items-center justify-between gap-4 rounded-lg border p-3 text-left text-sm transition-all cursor-pointer ".concat(U?"text-brand-gray-500 dark:text-brand-gray-400 border-white/[0.08] hover:border-white/[0.08] hover:bg-white/[0.04]":"text-white border-white/[0.14] bg-white/[0.04] shadow-[0_4px_12px_rgba(0,0,0,0.15)] dark:shadow-[0_6px_16px_rgba(0,0,0,0.24)]"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[ex().label,(0,r.jsx)(d.m,{label:"Active"})]}),(0,r.jsx)("div",{className:"text-xs ".concat(U?"text-brand-gray-400 dark:text-brand-gray-500":"text-white/80"),children:ex().description})]}),(0,r.jsx)("div",{className:"w-5 flex items-center justify-center",children:U?null:(0,r.jsx)(l.A,{className:"size-5 text-white"})})]}),(0,r.jsx)("div",{className:"space-y-3",children:(()=>{let e=em(),t=f(!!(null==T?void 0:T.id)),a=t.filter(e=>!e.showInCollapsible),n=t.filter(e=>e.showInCollapsible),i=eg(),c=i||z||et,u=t=>{let a=t.id===U,n=t.id===e;return(0,r.jsxs)("button",{type:"button",onClick:()=>{q(t.id),K("")},className:"flex w-full items-center justify-between gap-4 rounded-lg border p-3 text-left text-sm transition-all cursor-pointer ".concat(a?"text-white border-white/[0.14] bg-white/[0.04] shadow-[0_4px_12px_rgba(0,0,0,0.15)] dark:shadow-[0_6px_16px_rgba(0,0,0,0.24)]":"text-brand-gray-500 dark:text-brand-gray-400 border-white/[0.08] hover:border-white/[0.08] hover:bg-white/[0.04]"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[t.label,n&&a&&(0,r.jsx)(d.m,{label:"Active"})]}),(0,r.jsxs)("div",{className:"text-xs ".concat(a?"text-white/80":"text-brand-gray-400 dark:text-brand-gray-500"),children:[t.description,et&&t.id===s.YTt.NO_TRAINING&&(0,r.jsx)("div",{className:"mt-1 text-xs text-brand-gray-300 dark:text-brand-gray-500",children:"Automatic migration on June 26, 2025 if no option selected"})]})]}),(0,r.jsx)("div",{className:"w-5 flex items-center justify-center",children:a?(0,r.jsx)(l.A,{className:"size-5 text-white"}):null})]},t.id)};return(0,r.jsxs)("div",{className:"space-y-3",children:[a.map(u),n.length>0&&(0,r.jsxs)("button",{type:"button",onClick:()=>$(!z),disabled:i,className:"flex w-full items-center justify-start px-3 py-2 text-left text-sm transition-colors ".concat(i?"text-brand-gray-600 cursor-default opacity-50":"text-brand-gray-400 hover:text-white cursor-pointer"),children:[(0,r.jsx)("span",{className:"text-xs font-medium",children:"More Options"}),(0,r.jsx)(o.A,{className:"w-3 h-3 ml-2 transition-transform ".concat(c?"rotate-180":"")})]}),c&&n.map(u)]})})()})]}),U&&ep()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-px bg-[#ffffff14]"}),(0,r.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,r.jsxs)("div",{className:"rounded-lg p-3 bg-yellow-50 dark:bg-yellow-900/30",children:[(0,r.jsx)("p",{className:"font-semibold mb-2 text-yellow-800 dark:text-yellow-200",children:"Done"}),(0,r.jsx)("ul",{className:"list-disc space-y-2 pl-4 text-sm text-yellow-700 dark:text-yellow-300",children:null==(N=eb())?void 0:N.features.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]}),!M&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-brand-gray-600 dark:text-brand-gray-400",children:['Type "',null==(k=eb())?void 0:k.label,'" below to confirm']}),(0,r.jsx)("input",{type:"text",value:W,onChange:e=>K(e.target.value),className:"w-full rounded-lg border border-brand-gray-300 bg-brand-dashboard-bg px-3 py-2 text-sm focus:border-brand-dashboard-highlight focus:outline-none focus:ring-1 focus:ring-brand-dashboard-highlight dark:border-gray-700"})]})]})]})]}),V&&(0,r.jsx)("div",{className:"rounded-md bg-red-100 p-3 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-300",children:V}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[U&&ep()&&(0,r.jsx)("button",{onClick:()=>{q(em()),Q(null),K("")},className:"rounded-lg border border-brand-borders px-4 py-2 text-sm hover:bg-brand-dashboard-bg",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{U&&ep()?ey(U):(D(!1),q(null),Q(null),K(""))},disabled:G||U!==em()&&!M&&W.toLowerCase()!==(null==(S=eb())||null==(C=S.label)?void 0:C.toLowerCase()),className:"rounded-lg bg-brand-dashboard-highlight px-4 py-2 text-sm text-white hover:bg-opacity-90 disabled:opacity-50",children:G?"Changing...":(em(),"Done")})]})]})]}):ev||eh?(0,r.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,r.jsx)(u.K,{})}):!0===eu?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.w,{label:"Privacy",children:(0,r.jsx)(g.A,{children:(0,r.jsx)(b.J,{label:"Confirm Privacy Settings",description:"Choose how Cursor handles your data",trailingItems:(0,r.jsx)(c.j,{onClick:()=>D(!0),children:"Configure Privacy Settings"})})})}),(0,r.jsx)(y.zf,{show:J,onClose:()=>{D(!1),q(null),Q(null),K("")},title:"Privacy Settings",description:(0,r.jsxs)(r.Fragment,{children:["Choose how Cursor stores and uses data. You can modify this setting at any time."," ",(0,r.jsx)("a",{href:"/privacy",target:"_blank",className:"text-brand-gray-800 hover:text-brand-gray-900 hover:underline transition-colors",children:"Learn more"})]}),children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6 text-sm",children:[(0,r.jsx)("div",{className:"space-y-3",children:f(!1).map(e=>{let t=e.id===U;return(0,r.jsxs)("button",{type:"button",onClick:()=>{q(e.id),K("")},className:"flex w-full items-center justify-between gap-4 rounded-lg border p-3 text-left text-sm transition-all ".concat(t?"cursor-pointer text-white border-white/[0.14] bg-white/[0.04] shadow-[0_4px_12px_rgba(0,0,0,0.15)] dark:shadow-[0_6px_16px_rgba(0,0,0,0.24)]":"cursor-pointer text-brand-gray-500 dark:text-brand-gray-400 border-white/[0.08] hover:border-white/[0.08] hover:bg-white/[0.04]"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,r.jsx)("div",{className:"font-medium flex items-center gap-2",children:e.label}),(0,r.jsxs)("div",{className:"text-xs ".concat(t?"text-white/80":"text-brand-gray-400 dark:text-brand-gray-500"),children:[e.description,et&&e.id===s.YTt.NO_TRAINING&&(0,r.jsx)("div",{className:"mt-1 text-xs text-brand-gray-300 dark:text-brand-gray-500",children:"Automatic migration on June 26, 2025 if no option selected"})]})]}),(0,r.jsx)("div",{className:"w-5 flex items-center justify-center",children:t?(0,r.jsx)(l.A,{className:"size-5 text-white"}):null})]},e.id)})}),U&&!M&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium",children:['Type "',null==(_=eb())?void 0:_.label,'" to confirm:']}),(0,r.jsx)("input",{type:"text",value:W,onChange:e=>K(e.target.value),className:"w-full rounded-lg border border-brand-borders bg-brand-dashboard-bg px-3 py-2 text-sm",placeholder:null==(A=eb())?void 0:A.label})]}),V&&(0,r.jsx)("div",{className:"rounded-md bg-red-100 p-3 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-300",children:V})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,r.jsx)("button",{onClick:()=>{D(!1),q(null),Q(null),K("")},className:"rounded-lg border border-brand-borders px-4 py-2 text-sm hover:bg-brand-dashboard-bg",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{U&&ey(U)},disabled:G||!U||!M&&W.toLowerCase()!==(null==(I=eb())||null==(E=I.label)?void 0:E.toLowerCase()),className:"rounded-lg bg-brand-dashboard-highlight px-4 py-2 text-sm text-white hover:bg-opacity-90 disabled:opacity-50",children:G?"Setting...":"Set Privacy Mode"})]})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.w,{label:"Privacy",children:(0,r.jsx)(g.A,{trailingCaption:(0,r.jsxs)(r.Fragment,{children:[el&&ei>0?"Grace period: ".concat(ei," hours remaining \xb7 This setting is enforced by your team"):el?"This setting is enforced by your team":ei>0?"Grace period: ".concat(ei," hours remaining"):null,(el||ei>0)&&(0,r.jsx)(r.Fragment,{children:" \xb7 "}),(0,r.jsx)("a",{href:"/privacy",target:"_blank",className:"dashboard-text-ansi-blue",children:"Learn More"})]}),children:(0,r.jsx)(b.J,{label:(0,r.jsxs)(r.Fragment,{children:[ex().label,(0,r.jsx)(d.m,{label:"Active"})]}),description:ex().description+((null==T?void 0:T.id)?" Applies to all team members.":""),trailingItems:(null==T?void 0:T.id)?ef&&!v.includes(null==T?void 0:T.id)&&(0,r.jsx)(c.j,{onClick:()=>D(!0),size:"base",children:"Edit"}):!el&&(0,r.jsx)(c.j,{onClick:()=>D(!0),size:"base",children:"Edit"})})})}),(0,r.jsx)(y.zf,{show:J,onClose:()=>{D(!1),q(null),Q(null),K("")},title:"Privacy Settings",description:(0,r.jsxs)(r.Fragment,{children:["Choose how Cursor stores and uses data. You can modify this setting at any time."," ",(0,r.jsx)("a",{href:"/privacy",target:"_blank",className:"text-brand-gray-800 hover:text-brand-gray-900 hover:underline transition-colors",children:"Learn more"})]}),children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6 text-sm",children:[(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsx)("div",{className:"space-y-3",children:(()=>{let e=em(),t=f(!!(null==T?void 0:T.id)),a=t.filter(e=>!e.showInCollapsible),n=t.filter(e=>e.showInCollapsible),i=eg(),c=i||z||et,u=t=>{let a=t.id===U,n=t.id===e;return(0,r.jsxs)("button",{type:"button",onClick:()=>{q(t.id),K("")},className:"flex w-full items-center justify-between gap-4 rounded-lg border p-3 text-left text-sm transition-all cursor-pointer ".concat(a?"text-white border-white/[0.14] bg-white/[0.04] shadow-[0_4px_12px_rgba(0,0,0,0.15)] dark:shadow-[0_6px_16px_rgba(0,0,0,0.24)]":"text-brand-gray-500 dark:text-brand-gray-400 border-white/[0.08] hover:border-white/[0.08] hover:bg-white/[0.04]"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[t.label,n&&a&&(0,r.jsx)(d.m,{label:"Active"})]}),(0,r.jsxs)("div",{className:"text-xs ".concat(a?"text-white/80":"text-brand-gray-400 dark:text-brand-gray-500"),children:[t.description,et&&t.id===s.YTt.NO_TRAINING&&(0,r.jsx)("div",{className:"mt-1 text-xs text-brand-gray-300 dark:text-brand-gray-500",children:"Automatic migration on June 26, 2025 if no option selected"})]})]}),(0,r.jsx)("div",{className:"w-5 flex items-center justify-center",children:a?(0,r.jsx)(l.A,{className:"size-5 text-white"}):null})]},t.id)};return(0,r.jsxs)("div",{className:"space-y-3",children:[a.map(u),n.length>0&&(0,r.jsxs)("button",{type:"button",onClick:()=>$(!z),disabled:i,className:"flex w-full items-center justify-start pt-2 pl-1 text-left text-sm transition-colors ".concat(i?"text-brand-gray-600 cursor-default opacity-50":"text-brand-gray-400 hover:text-white cursor-pointer"),children:[(0,r.jsx)("span",{className:"text-xs font-medium",children:"More Options"}),(0,r.jsx)(o.A,{className:"w-3 h-3 ml-2 transition-transform ".concat(c?"rotate-180":"")})]}),c&&n.map(u)]})})()})}),U&&ep()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-px bg-[#ffffff14]"}),(0,r.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,r.jsxs)("div",{className:"rounded-lg p-3 bg-yellow-50 dark:bg-yellow-900/30",children:[(0,r.jsx)("p",{className:"font-semibold mb-2 text-yellow-800 dark:text-yellow-200",children:"Done"}),(0,r.jsx)("ul",{className:"list-disc space-y-2 pl-4 text-sm text-yellow-700 dark:text-yellow-300",children:null==(t=eb())?void 0:t.features.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]}),!M&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-brand-gray-600 dark:text-brand-gray-400",children:['Type "',null==(a=eb())?void 0:a.label,'" below to confirm']}),(0,r.jsx)("input",{type:"text",value:W,onChange:e=>K(e.target.value),className:"w-full rounded-lg border border-brand-gray-300 bg-brand-dashboard-bg px-3 py-2 text-sm focus:border-brand-dashboard-highlight focus:outline-none focus:ring-1 focus:ring-brand-dashboard-highlight dark:border-gray-700"})]})]})]})]}),V&&(0,r.jsx)("div",{className:"rounded-lg bg-red-100 p-3 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-300",children:V}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[U&&ep()&&(0,r.jsx)("button",{onClick:()=>{q(em()),Q(null),K("")},className:"rounded-lg border border-brand-borders px-4 py-2 text-sm hover:bg-brand-dashboard-bg",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{U&&ep()?ey(U):(D(!1),q(null),Q(null),K(""))},disabled:G||ep()&&!M&&W.toLowerCase()!==(null==(j=eb())||null==(w=j.label)?void 0:w.toLowerCase()),className:"rounded-lg bg-brand-dashboard-highlight px-4 py-2 text-sm text-white hover:bg-opacity-90 disabled:opacity-50",children:G?"Changing...":(ep(),"Done")})]})]})})]})}},41300:(e,t,a)=>{a.d(t,{U:()=>o});var r=a(90037),s=a(47531),n=a(6665),i=a(10689),l=a(64372);let o=e=>{let t=(0,s.jE)(),a=(0,i.useMemo)(()=>["dashboard","team",null==e?void 0:e.id,"privacyMode"],[null==e?void 0:e.id]),o=(0,i.useCallback)(e=>{if((null==e?void 0:e.privacyMode)&&"PRIVACY_MODE_UNSPECIFIED"!==e.privacyMode)switch(e.privacyMode){case"PRIVACY_MODE_NO_STORAGE":return r.YTt.NO_STORAGE;case"PRIVACY_MODE_NO_TRAINING":return r.YTt.NO_TRAINING;case"PRIVACY_MODE_USAGE_CODEBASE_TRAINING_ALLOWED":return r.YTt.USAGE_CODEBASE_TRAINING_ALLOWED;default:return e.privacyModeForced?r.YTt.NO_STORAGE:r.YTt.USAGE_CODEBASE_TRAINING_ALLOWED}return(null==e?void 0:e.privacyModeForced)?r.YTt.NO_STORAGE:r.YTt.USAGE_CODEBASE_TRAINING_ALLOWED},[]),{data:d,isFetching:c,refetch:u}=(0,n.I)({queryKey:a,enabled:!!(null==e?void 0:e.id),queryFn:async()=>{try{let t=await fetch("/api/dashboard/get-team-privacy-mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:e.id})});if(!t.ok)throw Error("HTTP error ".concat(t.status));let a=await t.json();return o(a)}catch(t){return(null==e?void 0:e.privacyModeForced)?r.YTt.NO_STORAGE:r.YTt.USAGE_CODEBASE_TRAINING_ALLOWED}}}),h=null!=d?d:null,[m,x]=(0,i.useState)(!1),b=(0,i.useCallback)(()=>!!(null==e?void 0:e.id)&&!0===e.privacyModeForced&&h===r.YTt.NO_STORAGE&&!e.isEnterprise,[null==e?void 0:e.id,null==e?void 0:e.privacyModeForced,null==e?void 0:e.isEnterprise,h]),p=(0,i.useCallback)(async()=>{x(b())},[b]);(0,i.useEffect)(()=>{x(b())},[b]);let g=(0,i.useCallback)(async()=>{(null==e?void 0:e.id)&&await u()},[null==e?void 0:e.id,u]),y=(0,i.useCallback)(r=>{if((null==e?void 0:e.id)&&a){if(null===r){t.removeQueries({queryKey:a}),t.invalidateQueries({queryKey:l.n});return}t.setQueryData(a,r),t.invalidateQueries({queryKey:l.n})}},[null==e?void 0:e.id,t,a]),f=h===r.YTt.NO_STORAGE;return{teamPrivacyMode:h,isLoadingPrivacyMode:c,fetchTeamPrivacyMode:g,setTeamPrivacyMode:y,isBackgroundAgentsRestricted:f,isOnLegacyPrivacyMode:m,fetchIsOnLegacyPrivacyMode:p,setIsOnLegacyPrivacyMode:x}}},43693:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(9381);function s(e){return(0,r.jsx)("div",{className:"dashboard-badge",children:(0,r.jsx)("div",{className:"dashboard-badge-label",children:e.label})})}a(35371)},51024:(e,t,a)=>{a.d(t,{_:()=>o});var r=a(9381),s=a(12061),n=a(20996),i=a(10689),l=a(64030);let o=e=>{let{title:t,description:a,featureName:o,onClick:d,buttonText:c="Upgrade to Pro"}=e,[u,h]=i.useState(!1),{createCheckoutUrl:m}=(0,s.M)(),x=t||(o?"Unlock ".concat(o," with Pro"):""),b=a||(o?"Upgrade to Pro for ".concat(o,", unlimited completions, MAX Mode, and more"):""),p=async()=>{if(!u){h(!0);try{if(d)await d(),h(!1);else{let e=await m({tier:"pro"});window.location.href=e}}catch(e){console.error("[Upgrade] Error during upgrade:",e),h(!1)}}};return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center py-10 bg-brand-dashboard-card rounded-xl w-full",children:(0,r.jsxs)("div",{className:"text-center max-w-sm flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-brand-gray-400",children:x}),(0,r.jsx)("p",{className:"text-brand-gray-300 text-sm",children:b})]}),(0,r.jsx)(l.B,{onClick:p,disabled:u,leadingIcon:!u&&(0,r.jsx)(n.A,{className:"h-3 w-3"}),className:"w-fit mx-auto",children:u?"Processing...":c})]})})}},56301:(e,t,a)=>{a.d(t,{V:()=>i});var r=a(9381),s=a(89888),n=a(54392);let i=e=>{let{stripeStatus:t,limitOptions:a,selectedLimit:i,customValue:l,handleLimitSelect:o,handleCustomLimitChange:d,onCancel:c,onEnable:u}=e;return(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(null==t?void 0:t.membershipType)===n.V.FREE||(null==t?void 0:t.membershipType)===n.V.FREE_TRIAL?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.o5,{className:"text-sm text-white/70",children:"Enable usage-based pricing to exceed model rate limits by paying per request."}),(0,r.jsx)("a",{href:"/dashboard",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-md bg-brand-dashboard-highlight px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-brand-dashboard-highlight focus:ring-offset-2",children:"Upgrade to Pro"}),(0,r.jsx)(s.o5,{className:"text-xs text-white/50",children:"Usage-based pricing requires a Pro or Enterprise plan."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.o5,{className:"text-sm text-white/70",children:"Launching a background agent requires usage-based pricing. Select a limit to continue."}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[a.map(e=>(0,r.jsx)("div",{className:"px-2 py-1 rounded-md flex-1 flex items-center justify-center opacity-80 hover:opacity-100 select-none cursor-pointer ".concat(i===e?"border border-solid border-white !opacity-100":"border border-solid border-gray-600"),onClick:()=>o(e),children:(0,r.jsx)("span",{className:"text-[11px] text-center select-none ".concat(i===e?"text-white":"text-gray-400"),children:e})},e)),(0,r.jsx)("input",{type:"text",value:l?"$".concat(l):"",onChange:e=>d(parseInt(e.target.value.replace("$",""))||0),onClick:()=>{o("Custom")},onKeyDown:e=>{"Enter"===e.key&&(null===l&&d(50),o("Custom"))},onBlur:()=>{o("Custom")},className:"px-2 py-1 ring-0 outline-none rounded-md text-[11px] border border-solid border-white w-[45px] !bg-transparent flex-1 flex text-center items-center justify-center opacity-80 hover:opacity-100 ".concat("Custom"===i?"!text-white border border-solid border-white !opacity-100":"!text-gray-400 border border-solid border-gray-600"),placeholder:"$ "})]}),(0,r.jsxs)("div",{className:"flex flex-row w-full items-center gap-2 mt-4",children:[(0,r.jsx)("button",{onClick:c,className:"w-full border border-solid border-white/10 inline-flex text-white/50 items-center hover:bg-white/5 justify-center rounded-md px-4 py-2 text-sm font-medium text-white transition-colors focus:outline-none focus:ring-none focus:ring-offset-2",children:"Cancel"}),(0,r.jsx)("button",{onClick:u,className:"w-full inline-flex items-center hover:bg-brand-dashboard-highlight/30 justify-center rounded-md bg-brand-dashboard-highlight px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-brand-dashboard-highlight focus:ring-offset-2",children:"Enable"})]})]})})}},64030:(e,t,a)=>{a.d(t,{B:()=>s});var r=a(9381);a(35371);let s=e=>{let{leadingIcon:t,trailingIcon:a,children:s,className:n="",disabled:i,size:l="base",...o}=e;return(0,r.jsxs)("button",{className:"dashboard-primary-button ".concat("medium"===l?"dashboard-primary-button-medium":""," ").concat(n),disabled:i,...o,children:[t&&(0,r.jsx)("div",{className:"dashboard-primary-button-icon",children:t}),s&&(0,r.jsx)("span",{className:"dashboard-primary-button-text",children:s}),a&&(0,r.jsx)("div",{className:"dashboard-primary-button-icon",children:a})]})}},70529:(e,t,a)=>{a.d(t,{d:()=>h});var r=a(10689),s=a(90037),n=a(47531),i=a(6665),l=a(67448),o=a(51455),d=a(73147),c=a(91393);let u=["githubInstallations"],h=()=>{var e,t,a;let h=(0,n.jE)(),{data:m,isLoading:x,error:b,refetch:p}=(0,i.I)({queryKey:u,queryFn:async()=>await d.o.getGithubInstallations(),staleTime:3e5,refetchOnWindowFocus:!1}),g=null!=(e=null==m?void 0:m.githubConnected)&&e,y=null!=(t=null==m?void 0:m.teamHasBugbotRepos)&&t,f=null!=(a=null==m?void 0:m.githubUsernames)?a:[],v=(0,r.useMemo)(()=>{var e;return(null!=(e=null==m?void 0:m.installations)?e:[]).map(e=>({...e,currentRepoPage:1}))},[null==m?void 0:m.installations]),[w,j]=(0,r.useState)(new Set),[N,k]=(0,r.useState)(new Set),C=e=>j(t=>new Set(t).add(e)),S=e=>j(t=>{let a=new Set(t);return a.delete(e),a}),_=(0,l.n)({mutationFn:async e=>{let{repo:t,mode:a}=e,r=(0,c.CY)(a);return await d.o.updateRepoSettings(t.installationId,t.repoNodeId,r),{settings:r,repo:t}},onMutate:async e=>{var t,a,r;let{repo:n,mode:i}=e;await h.cancelQueries({queryKey:u});let l=h.getQueryData(u);return t=n.installationId,a=n.repoNodeId,r=e=>new s.XwS({...e,settings:(0,c.CY)(i)}),h.setQueryData(u,e=>e?{...e,installations:e.installations.map(e=>e.installationId!==t?e:{...e,repos:e.repos.map(e=>e.repoNodeId===a?r(e):e)})}:e),C(n.installationId.toString()),{prev:l,id:n.installationId.toString()}},onError:(e,t,a)=>{(null==a?void 0:a.prev)&&h.setQueryData(u,a.prev),h.invalidateQueries({queryKey:u})},onSettled:(e,t,a,r)=>{(null==r?void 0:r.id)&&S(r.id)}}),A=(0,l.n)({mutationFn:async e=>{let{installationId:t,mode:a,totalPages:r}=e;return d.o.updateAllRepoSettings(t,"on"===a,r)},onMutate:async e=>{var t;let{installationId:a,mode:r}=e;await h.cancelQueries({queryKey:u});let n=h.getQueryData(u);return t=e=>new s.XwS({...e,settings:(0,c.CY)(r)}),h.setQueryData(u,e=>e?{...e,installations:e.installations.map(e=>e.installationId!==a?e:{...e,repos:e.repos.map(e=>t(e))})}:e),C(a.toString()),{prev:n,id:a.toString()}},onError:(e,t,a)=>{(null==a?void 0:a.prev)&&h.setQueryData(u,a.prev),h.invalidateQueries({queryKey:u})},onSettled:(e,t,a,r)=>{(null==r?void 0:r.id)&&S(r.id)}}),E=(0,l.n)({mutationFn:async e=>{let{installation:t,settings:a}=e;return await d.o.updateInstallationSettings(t.installationId,a),{installationId:t.installationId,settings:a}},onMutate:async e=>{let{installation:t,settings:a}=e;await h.cancelQueries({queryKey:u});let r=h.getQueryData(u);return h.setQueryData(u,e=>e?{...e,installations:e.installations.map(e=>e.installationId===t.installationId?{...e,settings:a}:e)}:e),C(t.installationId.toString()),{prev:r,id:t.installationId.toString()}},onError:(e,t,a)=>{(null==a?void 0:a.prev)&&h.setQueryData(u,a.prev),h.invalidateQueries({queryKey:u})},onSettled:(e,t,a,r)=>{(null==r?void 0:r.id)&&S(r.id)}}),I=async(e,t,a)=>{var r;let n=new s.Oud({...null!=(r=e.settings)?r:{},allowlist:t,allowlistConfig:a});await E.mutateAsync({installation:e,settings:n})},T=async(e,t)=>{let a=e.installationId.toString();C(a);try{var r,n;let a=null!=(n=null==(r=e.settings)?void 0:r.allowlistConfig)?n:s.k1w.UNSPECIFIED;await d.o.updateSelfAllowlist(e.installationId,t,a)}catch(e){o.oR.error("Failed to update allowlist"),console.error("[useInstallations] self allowlist error",e)}finally{S(a),h.invalidateQueries({queryKey:u})}};return(0,r.useEffect)(()=>{m&&m.installations.filter(e=>e.hasMoreRepos).forEach(async e=>{let t=e.installationId.toString();if(!N.has(t)){k(e=>new Set(e).add(t));try{let t=await d.o.fetchAllInstallationRepos(e.installationId,e.totalPages);h.setQueryData(u,a=>a?{...a,installations:a.installations.map(a=>a.installationId===e.installationId?{...a,repos:t.repos,hasMoreRepos:!1}:a)}:a)}catch(t){console.error("[useInstallations] Failed to fetch repos for ".concat(e.installationId),t)}finally{k(e=>{let a=new Set(e);return a.delete(t),a})}}})},[m]),{githubConnected:g,teamHasBugbotRepos:y,githubUsernames:f,installations:v,isLoading:x,error:b?b.message:null,loadingInstallations:w,loadingMoreRepos:N,fetchInstallations:p,updateRepoSetting:(e,t)=>_.mutateAsync({repo:e,mode:t}),updateAllRepoSettings:(e,t)=>{var a;return A.mutateAsync({installationId:e,mode:t,totalPages:null==(a=v.find(t=>t.installationId===e))?void 0:a.totalPages})},updateInstallationSettings:(e,t)=>{var a;let r=new s.Oud({...null!=(a=e.settings)?a:{},...t});return E.mutateAsync({installation:e,settings:r})},updateInstallationAllowlist:I,updateSelfAllowlist:T}}},73147:(e,t,a)=>{a.d(t,{o:()=>n});var r=a(90037);class s{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-request-id":crypto.randomUUID()},body:JSON.stringify(t)});if(!a.ok){var r,s,n;let e;try{e=await a.json()}catch(e){}if(void 0!==e&&(null==e||null==(s=e.error)||null==(r=s.details)?void 0:r.length)>0){let t=e.error.details[0],r=Error((null==(n=t.details)?void 0:n.title)||"API call failed: ".concat(a.statusText));throw r.details=t,r}throw Error("API call failed: ".concat(a.statusText))}return a.json()}async getBugBotSettings(){return this.makeRequest("/api/dashboard/get-bugbot-settings")}async getGithubInstallations(e){let t=await this.makeRequest("/api/dashboard/get-github-installations",e?{installationRepoPages:e}:{});return r.UYU.fromJson(t)}async fetchAllInstallationRepos(e,t){let a=new r.UfC({installationId:e,...void 0!==t?{totalPages:t}:{}}),s=await this.makeRequest("/api/dashboard/fetch-all-installation-repos",a.toJson());return r.gJO.fromJson(s)}async getInstallationRepos(e,t){let a=new r.L$Y({installationId:e,startPage:t}),s=await this.makeRequest("/api/dashboard/get-installation-repos",a.toJson());return r.ljc.fromJson(s)}async getServiceAccountSpendLimit(e){let t={serviceType:"bugbot",...e?{teamId:e}:{}},a=await this.makeRequest("/api/dashboard/get-service-account-spend-limit",t);return r.bJx.fromJson(a)}async setServiceAccountSpendLimit(e,t){let a=new r.bkm({serviceType:"bugbot",spendLimitCents:t,...e?{teamId:e}:{}});await this.makeRequest("/api/dashboard/set-service-account-spend-limit",a.toJson())}async updateRepoSettings(e,t,a){let s=new r.NZ_({repo:new r.eLv({installationId:e,repoNodeId:t}),settings:a});await this.makeRequest("/api/dashboard/update-github-repo-settings",s.toJson())}async updateAllRepoSettings(e,t,a){let s=new r.CNn({installationId:e,bugBotEnabled:t,...void 0!==a?{totalPages:a}:{}}),n=await this.makeRequest("/api/dashboard/update-all-github-repo-settings",s.toJson());return{updatedCount:r.QOJ.fromJson(n).updatedCount}}async updateInstallationSettings(e,t){let a=new r.J9i({installationId:e,settings:t});await this.makeRequest("/api/dashboard/update-github-installation-settings",a.toJson())}async getBugbotUserSettings(){let e=new r.BHX({}),t=await this.makeRequest("/api/dashboard/get-bugbot-user-settings",e.toJson());return r.DLm.fromJson(t)}async updateBugbotUserSettings(e,t,a,s){let n=new r.QWx({manualTriggerOnly:e,runOnlyOnce:t,suppressNoBugsComments:a,enableDraft:s});await this.makeRequest("/api/dashboard/update-bugbot-user-settings",n.toJson())}async getBugbotAnalyticsV2(e,t,a){let s=new r.JWI({startDate:e,endDate:t,grouping:a}),n=await this.makeRequest("/api/dashboard/get-bugbot-analytics-v2",s.toJson());return r.NXG.fromJson(n)}async getBugBotPRAnalytics(e,t,a,s,n,i,l){let o=new r.Jns({githubRepoNodeId:e,status:t,githubUserNodeId:a,startDate:s,endDate:n,minBugsFound:i,limit:l}),d=await this.makeRequest("/api/dashboard/get-bugbot-pr-analytics",o.toJson());return r.Fkp.fromJson(d)}async updateSelfAllowlist(e,t,a){let s=new r.pNh({installationId:e,operation:"add"===t?r.Hj2.ADD:r.Hj2.REMOVE}),n=await this.makeRequest("/api/dashboard/update-self-github-allowlist",s.toJson()),i=r.vTx.fromJson(n);return new r.Oud({allowlist:i.allowlist,allowlistConfig:a})}async getInstallationGithubUsers(e){let t=new r.toQ({installationId:e}),a=await this.makeRequest("/api/dashboard/get-installation-github-users",t.toJson()),s=r.P4d.fromJson(a);return{users:s.githubUsers||[],permissionInfo:s.permissionInfo}}async addGithubUsersToTeam(e,t){let a=new r.gMg({installationId:e,githubUsers:t}),s=await this.makeRequest("/api/dashboard/add-github-users-to-team",a.toJson());return r.yD7.fromJson(s)}async getTeamGithubUsers(e){let t=new r.yk8({teamId:e}),a=await this.makeRequest("/api/dashboard/get-team-github-users",t.toJson());return r.ecN.fromJson(a)}async getTeamBugbotSettings(e){let t=new r.LRN({teamId:e}),a=await this.makeRequest("/api/dashboard/get-team-bugbot-settings",t.toJson());return r.Lg7.fromJson(a)}async updateTeamBugbotSettings(e,t,a,s,n){let i=new r.sNl({teamId:e,...void 0!==t?{bugbotLicensesHardLimit:t}:{},...void 0!==a?{bugbotPlanEnabled:a}:{},allowlist:null!=s?s:[],...void 0!==n?{allowlistConfig:n}:{}}),l=await this.makeRequest("/api/dashboard/update-team-bugbot-settings",i.toJson());return r.Mlf.fromJson(l)}async getBugBotProUserSettings(){let e=new r.I6A({}),t=await this.makeRequest("/api/dashboard/get-bugbot-pro-user-settings",e.toJson());return r.aBI.fromJson(t)}async updateBugBotProUserSettings(e){let t=new r.hSh({enabled:e});await this.makeRequest("/api/dashboard/update-bugbot-pro-user-settings",t.toJson())}async revokeBugBotLicenses(e,t){let a=new r.H5R({teamId:e,newNumLicenses:t}),s=await this.makeRequest("/api/dashboard/revoke-bugbot-licenses",a.toJson());return r.Tcn.fromJson(s)}async getCurrentBillingCycle(){let e=new r.yI7({}),t=await this.makeRequest("/api/dashboard/get-current-billing-cycle",e.toJson());return r.cTj.fromJson(t)}}let n=new s},76160:(e,t,a)=>{a.d(t,{Rw:()=>u,zf:()=>h});var r=a(9381),s=a(89888),n=a(23899),i=a(13715),l=a(37095),o=a(10689),d=a(17487),c=a(72586);function u(e){let{show:t,onClose:a,onConfirm:s,confirmText:n,title:i,children:l}=e;return(0,r.jsxs)(h,{title:i,show:t,onClose:a,children:[l,(0,r.jsx)(m,{onConfirm:s,confirmText:n,onCancel:()=>{a()}})]})}function h(e){let{children:t,title:a,description:i,show:o,onClose:c}=e;if(!o)return null;let u=()=>{c()};return(0,r.jsx)("div",{className:"fixed inset-0 flex items-start justify-center bg-black bg-opacity-60 pt-20",style:{zIndex:1e3},onClick:e=>{e.target===e.currentTarget&&u()},children:(0,r.jsxs)("div",{className:(0,l.cn)("relative flex w-[500px] flex-col gap-4 px-5 py-5","rounded-2xl border border-brand-neutrals-100 bg-brand-white text-brand-foreground dark:border-brand-neutrals-800 dark:bg-brand-medium-black","shadow-[0px_25px_50px_-12px_rgba(0,0,0,0.25),0px_12px_24px_-8px_rgba(0,0,0,0.15)]","dark:shadow-[0px_25px_50px_-12px_rgba(0,0,0,0.8),0px_12px_24px_-8px_rgba(0,0,0,0.6)]"," overflow-y-auto max-h-[80vh]"),children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(s.DZ,{variant:"subheading-2",children:a}),(0,r.jsx)(n.Button,{variant:"secondary",onClick:u,className:"h-8 w-8 p-0 md:p-0",children:(0,r.jsx)(d.A,{className:"size-4"})})]}),i&&(0,r.jsx)("div",{className:"mt-2 pr-5 text-sm text-brand-gray-600 dark:text-brand-gray-400",children:i})]}),t]})})}function m(e){let{onConfirm:t,confirmText:a,onCancel:s}=e,[l,d]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e;return u?e=setTimeout(()=>{x(!0)},3e3):x(!1),()=>clearTimeout(e)},[u]);let b=()=>{if(l.toLowerCase()===a.toLowerCase()){h(!0),d("");let e=t();e instanceof Promise?e.then(()=>{h(!1)}).catch(()=>{h(!1)}):h(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{type:"text",placeholder:"Type '".concat(a,"' to confirm"),className:"w-full",value:l,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&b()}}),(0,r.jsxs)("div",{className:"flex justify-end",children:[(0,r.jsx)(n.Button,{variant:"secondary",onClick:()=>{h(!1),s()},className:"mr-2",children:"Cancel"}),(0,r.jsx)(n.Button,{onClick:b,disabled:l.toLowerCase()!==a.toLowerCase(),children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"size-4 animate-spin"}),m&&"(this may take a while)"]}):a})]})]})}},91393:(e,t,a)=>{a.d(t,{CY:()=>n,EF:()=>s,h4:()=>l,vv:()=>i});var r=a(90037);let s=e=>(null==e?void 0:e.bugBotEnabled)?"on":"off",n=e=>new r.I1S({bugBotEnabled:"off"!==e,bugBotManualOnly:!1}),i=e=>"$".concat((e/100).toFixed(2)),l=e=>{let t=(e=>{if(!e.trim())return{isValid:!0,dollars:0};let t=e.startsWith("$")?e.slice(1):e;if(!/^(\d+\.?\d*|\.\d+)$/.test(t.trim()))return{isValid:!1,error:"Invalid number format"};let a=parseFloat(t);return isNaN(a)?{isValid:!1,error:"Invalid number"}:a<0?{isValid:!1,error:"Cannot be negative"}:a>1e5?{isValid:!1,error:"Spend limit cannot exceed $100,000"}:{isValid:!0,dollars:a}})(e);if(!t.isValid)throw Error(t.error||"Invalid currency input");return Math.round(100*t.dollars)}},95612:(e,t,a)=>{a.d(t,{J:()=>s});var r=a(9381);function s(e){return(0,r.jsxs)("div",{className:"dashboard-cell"+(e.description?" align-top":" align-center")+(e.onClick?" dashboard-cell-clickable":""),onClick:e.onClick,children:[(0,r.jsx)("div",{className:"dashboard-cell-divider"}),(0,r.jsxs)("div",{className:"dashboard-cell-leading-items"+(e.description?" align-top":" align-center"),children:[e.leadingIcon&&(0,r.jsx)("div",{className:"dashboard-cell-leading-icon",children:e.leadingIcon}),(0,r.jsxs)("div",{className:"dashboard-cell-content",children:[(0,r.jsx)("div",{className:"dashboard-cell-label",children:e.label}),e.description&&(0,r.jsx)("div",{className:"dashboard-cell-description",children:e.description})]})]}),(0,r.jsxs)("div",{className:"dashboard-cell-trailing-items",children:[e.trailingItemsCaption&&(0,r.jsx)("div",{className:"dashboard-cell-trailing-items-caption",children:e.trailingItemsCaption}),e.trailingItems]})]})}}}]);