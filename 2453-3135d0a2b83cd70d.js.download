(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2453],{10195:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(9381),s=a(96486),n=a(59357),l=a(38080),o=a(10689),i=a(34441),c=a(10691),d=a(12393),u=a(70529);let p="recentRepositories";function h(){try{let e=localStorage.getItem(p);return e?JSON.parse(e):[]}catch(e){return[]}}function m(e,t){if(!t||t.length<1)return e;let a=t.toLowerCase(),s=e.toLowerCase(),n=[],l=0;for(;l<s.length;){let e=s.indexOf(a,l);if(-1===e)break;n.push({start:e,end:e+t.length}),l=e+1}if(0===n.length){for(let r of e.split(/[\s\-_./\\]+/))if(r.toLowerCase().startsWith(a)){let e=s.indexOf(r.toLowerCase());if(-1!==e){n.push({start:e,end:e+t.length});break}}}if(0===n.length)return e;n.sort((e,t)=>e.start-t.start);let o=[],i=0;return n.forEach((t,a)=>{t.start>i&&o.push(e.slice(i,t.start)),o.push((0,r.jsx)("span",{className:"text-[#88C0D0] bg-[#273037] rounded-[2px]",children:e.slice(t.start,t.end)},a)),i=t.end}),i<e.length&&o.push(e.slice(i)),o}let x=o.memo(function(e){let{selectedRepo:t,onRepoSelect:a,className:x="",hasCachedData:f=!1,onOpenChange:g,hideIcon:w=!1,largeFonts:y=!1}=e,{installations:b,isLoading:v}=(0,u.d)(),[k,N]=(0,o.useState)(!1);(0,o.useEffect)(()=>{null==g||g(k)},[k,g]);let S=h(),j=(0,o.useMemo)(()=>b.flatMap(e=>e.repos.map(t=>({repo:t,displayName:"".concat(t.owner,"/").concat(t.name),installationName:e.repos.length>0?t.owner:"Unknown"}))),[b]),C=(0,o.useMemo)(()=>{let e=[],t=S.map(e=>{let t=j.find(t=>t.repo.repoNodeId===e.repoNodeId);return t?{...t,isRecent:!0}:null}).filter(Boolean);t.length>0&&(e.push({id:"recent-header",displayName:"Recent",data:{isHeader:!0,headerText:"Recent"},interactive:!1}),t.forEach(t=>{e.push({id:"recent-".concat(t.repo.repoNodeId),displayName:t.displayName,data:{repo:t.repo,installationName:t.installationName}})}));let a=new Set(t.map(e=>e.repo.repoNodeId)),r=j.filter(e=>!a.has(e.repo.repoNodeId)),s=new Map;return r.forEach(e=>{let t=e.repo.owner;s.has(t)||s.set(t,[]),s.get(t).push(e)}),Array.from(s.keys()).sort().forEach(t=>{let a=s.get(t);e.push({id:"org-".concat(t,"-header"),displayName:t,data:{isHeader:!0,headerText:t},interactive:!1}),a.forEach(t=>{e.push({id:t.repo.repoNodeId,displayName:t.displayName,data:{repo:t.repo,installationName:t.installationName}})})}),e},[j,S]),E=(0,o.useMemo)(()=>{var e;if(t)return null!=(e=C.filter(e=>e.data.repo&&!e.data.isHeader).find(e=>e.data.repo.repoNodeId===t.repoNodeId||e.data.repo.htmlUrl===t.htmlUrl))?e:f?{id:t.repoNodeId,displayName:"".concat(t.owner,"/").concat(t.name),data:{repo:t,installationName:t.installationId.toString()}}:void 0},[t,C,f]),I=(0,o.useCallback)(e=>{!e.data.isHeader&&e.data.repo&&(!function(e){try{let t=h(),a={repoNodeId:e.repoNodeId,owner:e.owner,name:e.name,htmlUrl:e.htmlUrl,installationId:e.installationId.toString()},r=t.filter(t=>t.repoNodeId!==e.repoNodeId),s=[a,...r].slice(0,3);localStorage.setItem(p,JSON.stringify(s))}catch(e){}}(e.data.repo),a(e.data.repo))},[a]),R=(0,o.useCallback)((e,t,a)=>{if(e.data.isHeader)return(0,r.jsx)("div",{className:"text-[9px] font-semibold text-gray-500/50 uppercase tracking-wide h-6 flex items-end",children:e.data.headerText});if(!e.data.repo)return null;let n=(null==E?void 0:E.id)===e.id||E&&E.data.repo&&E.data.repo.repoNodeId===e.data.repo.repoNodeId,l=e.displayName.split("/")[1]||e.displayName,o=e.data.installationName||"";return(0,r.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0 mr-2",children:[(0,r.jsx)("div",{className:"font-medium text-gray-300 truncate ".concat(y?"text-[12px]":"text-[11px]"),children:m(l,a)}),(0,r.jsx)("div",{className:"".concat(y?"text-xs":"text-[10px]"," text-gray-500 flex-shrink-0 max-w-full truncate"),children:m(o,a)})]}),n&&(0,r.jsx)(s.A,{className:"w-3 h-3 text-gray-300 flex-shrink-0 mt-0.5"})]})},[E,y]),M=(0,o.useCallback)((e,t,a)=>{if(e.data.isHeader)return(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-500/50 uppercase tracking-wide py-2",children:e.data.headerText});if(!e.data.repo)return null;let n=(null==E?void 0:E.id)===e.id||E&&E.data.repo&&E.data.repo.repoNodeId===e.data.repo.repoNodeId,l=e.displayName.split("/")[1]||e.displayName,o=e.data.installationName||"";return(0,r.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0 mr-3",children:[(0,r.jsx)("div",{className:"font-medium text-white text-base",children:m(l,a)}),(0,r.jsx)("div",{className:"text-sm text-gray-400 flex-shrink-0 max-w-full truncate",children:m(o,a)})]}),n&&(0,r.jsx)(s.A,{className:"w-5 h-5 text-white flex-shrink-0 mt-0.5"})]})},[E]),D=(0,r.jsx)("svg",{width:"13",height:"11",viewBox:"0 0 13 11",fill:"none",className:"flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M1.9873 10.2192C1.42513 10.2192 1.0026 10.0796 0.719727 9.80029C0.44043 9.52458 0.300781 9.10921 0.300781 8.5542V2.00684C0.300781 1.46615 0.429688 1.06152 0.6875 0.792969C0.945312 0.524414 1.31055 0.390137 1.7832 0.390137H3.31396C3.48942 0.390137 3.6416 0.402669 3.77051 0.427734C3.90299 0.452799 4.02295 0.493978 4.13037 0.55127C4.24137 0.608561 4.35596 0.687337 4.47412 0.787598L4.80176 1.05615C4.93783 1.17074 5.06852 1.25309 5.19385 1.30322C5.31917 1.34977 5.47314 1.37305 5.65576 1.37305H10.812C11.3706 1.37305 11.7913 1.5127 12.0742 1.79199C12.3571 2.07129 12.4985 2.48665 12.4985 3.03809V8.5542C12.4985 9.10921 12.3643 9.52458 12.0957 9.80029C11.8271 10.0796 11.453 10.2192 10.9731 10.2192H1.9873ZM1.99805 9.35449H10.7959C11.0609 9.35449 11.2668 9.28467 11.4136 9.14502C11.5604 9.00179 11.6338 8.79232 11.6338 8.5166V3.08643C11.6338 2.80713 11.5604 2.59587 11.4136 2.45264C11.2668 2.30941 11.0609 2.23779 10.7959 2.23779H5.43018C5.25472 2.23779 5.10075 2.22526 4.96826 2.2002C4.83577 2.17513 4.71403 2.13395 4.60303 2.07666C4.49202 2.01937 4.37923 1.94238 4.26465 1.8457L3.93701 1.57178C3.80094 1.45719 3.67025 1.37484 3.54492 1.32471C3.42318 1.27458 3.27279 1.24951 3.09375 1.24951H1.96045C1.70264 1.24951 1.5057 1.31755 1.36963 1.45361C1.23356 1.58968 1.16553 1.7902 1.16553 2.05518V8.51123C1.16553 8.79053 1.23714 9.00179 1.38037 9.14502C1.5236 9.28467 1.72949 9.35449 1.99805 9.35449ZM0.827148 4.20361V3.39258H11.9668V4.20361H0.827148Z",className:"fill-gray-600 group-hover:fill-gray-500"})})}),A=(0,r.jsx)("div",{className:"flex items-center justify-between w-full p-0.5",children:(0,r.jsxs)("button",{onClick:()=>{v||window.open("/api/auth/connect-github?from=website","_blank")},className:"w-full p-2 flex items-center justify-between transition-colors ".concat(v?"cursor-not-allowed opacity-50":"hover:bg-gray-300/10"),disabled:v,children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.A,{className:"w-3 h-3 text-gray-500"}),(0,r.jsx)("span",{className:"text-[11px] font-medium text-gray-300",children:"Manage GitHub"})]}),(0,r.jsx)(l.A,{className:"w-3 h-3 text-gray-500"})]})}),T=v&&!f,F=(0,o.useCallback)(e=>{e&&(0===b.length||v)||null==g||g(e)},[b.length,v,g]);return(0,r.jsx)(r.Fragment,{children:i.Fr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{0===b.length||v||N(!0)},className:"inline-flex items-center justify-between text-left transition-colors duration-100 overflow-hidden group max-w-full ".concat(T||v?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-500 hover:text-gray-400"," ").concat(x),disabled:T||v,children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 transition-opacity duration-100 overflow-hidden",children:[!w&&D,(0,r.jsx)("span",{className:"truncate text-[14px]",children:T?"Loading repositories...":(null==E?void 0:E.displayName)||"Select repository"})]}),(0,r.jsx)("svg",{className:"w-3 h-3 transition-opacity duration-100 ml-1 flex-shrink-0 ".concat(T||v?"text-gray-700":"text-gray-600 group-hover:text-gray-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,r.jsx)(c.P,{isOpen:k,onOpenChange:N,items:C,onItemSelect:I,searchPlaceholder:"Search repositories...",noItemsText:"No repositories available",noSearchResultsText:"No repositories found",renderItem:M})]}):(0,r.jsx)(d.q,{items:C,selectedItem:E,onItemSelect:I,placeholder:"Select repository",searchPlaceholder:"Search repositories...",className:x,icon:w?void 0:D,isLoading:T,loadingText:"Loading repositories...",noItemsText:"No repositories available",noSearchResultsText:"No repositories found",renderItem:R,disableMenuOpen:0===b.length||v,onOpenChange:F,largeFonts:!0,doubleRowHeight:!0,footer:A})})})},10691:(e,t,a)=>{"use strict";a.d(t,{K:()=>d,P:()=>u});var r=a(9381),s=a(76777),n=a(7566),l=a(14578),o=a(10689),i=a(67473),c=a(44064);function d(e){let{isOpen:t,onOpenChange:a,title:s,inputPlaceholder:n,confirmText:l,cancelText:d,onConfirm:u,onCancel:p}=e,[h,m]=(0,o.useState)(""),x=(0,o.useRef)(null),f=(0,o.useRef)("mobile-input-".concat(Math.random().toString(36).substr(2,9)));(0,o.useEffect)(()=>{(0,c.KZ)(f.current,t)},[t]),(0,o.useEffect)(()=>{t&&(m(""),setTimeout(()=>{var e;null==(e=x.current)||e.focus()},100))},[t]);let g=(0,o.useCallback)(()=>{h.trim()&&(u(h.trim()),m(""))},[h,u]),w=(0,o.useCallback)(()=>{m(""),p()},[p]),y=(0,o.useCallback)(e=>{(0,c.KZ)(f.current,e),a(e),e||m("")},[a]);return(0,o.useEffect)(()=>{if(!t)return;let e=e=>{"Enter"===e.key?(e.preventDefault(),g()):"Escape"===e.key&&(e.preventDefault(),w())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,g,w]),(0,r.jsx)(i._s.Root,{open:t,onOpenChange:y,children:(0,r.jsxs)(i._s.Portal,{children:[(0,r.jsx)(i._s.Overlay,{className:"fixed inset-0 bg-black/50 z-50"}),(0,r.jsxs)(i._s.Content,{className:"ring-0 outline-none bg-gradient-to-b from-[#17191D] to-[#121315] flex flex-col rounded-t-xl border border-white/10 h-auto mt-24 fixed bottom-0 left-0 right-0 z-50",children:[(0,r.jsx)("div",{className:"p-4 pb-0",children:(0,r.jsx)(i._s.Handle,{className:"bg-white/20 h-1 w-12 rounded-full mx-auto mb-4"})}),(0,r.jsxs)("div",{className:"px-4 pb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:s}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("input",{id:"drawer-input",ref:x,type:"text",placeholder:n,value:h,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 bg-[#1B1D21] border border-white/5 rounded-lg text-white placeholder-gray-400 text-base focus:outline-none focus:border-white/10",style:{fontSize:"16px"}})}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("button",{onClick:g,disabled:!h.trim(),className:"w-full py-3 bg-[#81A1C1] text-[#2A2A2A] rounded-lg font-medium text-base hover:bg-[#9AB4CD] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l}),(0,r.jsx)("button",{onClick:w,className:"w-full py-3 bg-transparent text-gray-400 rounded-lg font-medium text-base hover:text-white hover:bg-white/5 transition-colors",children:d})]})]})]})]})})}function u(e){let{isOpen:t,onOpenChange:a,items:d,onItemSelect:u,searchPlaceholder:p="Search...",noItemsText:h="No items available",noSearchResultsText:m="No items match your search",renderItem:x,closeOnSelect:f=!0,showAddButton:g=!1,addButtonText:w="Add item",addButtonIcon:y,onAddButtonClick:b}=e,[v,k]=(0,o.useState)(""),[N,S]=(0,o.useState)(-1),j=(0,o.useRef)(null),C=(0,o.useRef)("mobile-dropdown-".concat(Math.random().toString(36).substr(2,9))),E=(0,o.useMemo)(()=>new s.A(d,{keys:["displayName"],threshold:.3,distance:100,includeScore:!0,includeMatches:!0,minMatchCharLength:1,shouldSort:!0}),[d]),I=(0,o.useMemo)(()=>v.trim()?E.search(v).map(e=>e.item):d,[d,v,E]);(0,o.useEffect)(()=>{(0,c.KZ)(C.current,t)},[t]),(0,o.useEffect)(()=>{t&&(k(""),S(-1),setTimeout(()=>{var e;null==(e=j.current)||e.focus()},100))},[t]),(0,o.useEffect)(()=>{if(I.length>0){let e=I.findIndex(e=>!1!==e.interactive);S(e>=0?e:-1)}else S(-1)},[I]);let R=(0,o.useCallback)(e=>{u(e),f&&a(!1)},[u,f,a]),M=(0,o.useCallback)(e=>{(0,c.KZ)(C.current,e),a(e)},[a]);return(0,o.useEffect)(()=>{if(!t)return;let e=e=>{let t=(e,t)=>{let a=e;for(;a>=0&&a<I.length;){if(!1!==I[a].interactive)return a;a+=t}return -1};switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),S(e=>{if(-1===e)return t(0,1);let a=t(e+1,1);return a>=0?a:e});break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),S(e=>{if(-1===e)return t(I.length-1,-1);let a=t(e-1,-1);return a>=0?a:e});break;case"Enter":e.preventDefault(),e.stopPropagation(),N>=0&&N<I.length&&R(I[N]);break;case"Escape":e.preventDefault(),e.stopPropagation(),M(!1)}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,N,I,R,M]),(0,r.jsx)(i._s.Root,{open:t,onOpenChange:M,children:(0,r.jsxs)(i._s.Portal,{children:[(0,r.jsx)(i._s.Overlay,{className:"fixed inset-0 bg-black/50 z-50"}),(0,r.jsxs)(i._s.Content,{className:"ring-0 outline-none bg-gradient-to-b from-[#17191D] to-[#121315] flex flex-col rounded-t-xl border border-white/10 h-[85vh] mt-24 fixed bottom-0 left-0 right-0 z-50",children:[(0,r.jsx)("div",{className:"p-4 pb-0",children:(0,r.jsx)(i._s.Handle,{className:"bg-white/20 h-1 w-12 rounded-full mx-auto mb-4"})}),(0,r.jsx)("div",{className:"px-4 pb-4",children:g?(0,r.jsxs)("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 py-3 bg-[#1B1D21] border border-white/5 rounded-lg text-white text-base hover:bg-[#1E2024] transition-colors",children:[y||(0,r.jsx)(n.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:w})]}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{ref:j,type:"text",placeholder:p,value:v,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-[#1B1D21] border border-white/5 rounded-lg text-white placeholder-gray-400 text-base focus:outline-none focus:border-white/10",style:{fontSize:"16px"}})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4",children:0===I.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-400 text-base",children:v?m:h}):(0,r.jsx)("div",{className:"space-y-1",children:I.map((e,t)=>{let a=!1!==e.interactive,s=I[t+1];return(0,r.jsx)("div",{children:a?(0,r.jsx)("button",{onClick:()=>R(e),className:"w-full text-left px-4 py-2 ".concat(t===I.length-1||(null==s?void 0:s.data)&&"object"==typeof s.data&&"isHeader"in s.data&&s.data.isHeader?"border-b-0":"border-b border-white/5"),style:{borderRadius:"0px"},children:(0,r.jsx)("div",{className:"w-full min-w-0",children:x?x(e,t===N,v):(0,r.jsx)("div",{className:"text-white font-medium text-base truncate",children:e.displayName})})}):(0,r.jsx)("div",{className:"px-4 py-2",children:(0,r.jsx)("div",{className:"w-full min-w-0",children:x?x(e,!1,v):(0,r.jsx)("div",{className:"text-white font-medium text-base truncate",children:e.displayName})})})},e.id)})})})]})]})})}},12393:(e,t,a)=>{"use strict";a.d(t,{q:()=>u});var r=a(9381);a(30580);var s=a(76777),n=a(85524),l=a(14578),o=a(10689),i=a(97764),c=a(29179);let d={openDropdownId:null,callbacks:new Map};function u(e){let{items:t,selectedItem:a,onItemSelect:u,placeholder:p,searchPlaceholder:h,className:m="",icon:x,isLoading:f,loadingText:g="Loading...",noItemsText:w="No items available",noSearchResultsText:y="No items match your search",renderItem:b,disabled:v,disabledText:k,onOpenChange:N,largeFonts:S=!1,showMax:j=!1,customDisplayText:C,closeOnSelect:E=!0,doubleRowHeight:I=!1,openUpwards:R=!1,disableMenuOpen:M=!1,footer:D}=e,[A,T]=(0,o.useState)(!1),[F,L]=(0,o.useState)(!1),[H,U]=(0,o.useState)(""),[O,_]=(0,o.useState)(-1),P=(0,o.useRef)(""),J=(0,o.useRef)(null),z=(0,o.useRef)("dropdown-".concat(Math.random().toString(36).slice(2,11))).current,B=(0,o.useCallback)(()=>{J.current&&clearTimeout(J.current),L(!0),d.openDropdownId===z&&(d.openDropdownId=null),J.current=setTimeout(()=>{T(!1),L(!1),U(""),J.current=null},150)},[z]);(0,o.useEffect)(()=>(d.callbacks.set(z,B),()=>{d.callbacks.delete(z)}),[z,B]),(0,o.useEffect)(()=>()=>{J.current&&clearTimeout(J.current)},[]),(0,o.useEffect)(()=>{null==N||N(A)},[A,N]);let q=(0,o.useRef)(null),Z=(0,o.useRef)(null),K=(0,o.useRef)(null),V=(0,o.useMemo)(()=>new s.A(t,{keys:["displayName"],threshold:.3,distance:100,includeScore:!0,includeMatches:!0,minMatchCharLength:1,shouldSort:!0}),[t]),W=(0,o.useMemo)(()=>H.trim()?V.search(H).map(e=>e.item):t,[t,H,V]);(0,o.useEffect)(()=>{function e(e){d.openDropdownId===z&&q.current&&!q.current.contains(e.target)&&B()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[B,z]),(0,o.useEffect)(()=>{A&&Z.current&&(Z.current.focus(),_(-1))},[A]),(0,o.useEffect)(()=>{P.current!==H&&(P.current=H,W.length>0?_(((e,t)=>{let a=e;for(;a>=0&&a<W.length;){if(!1!==W[a].interactive)return a;a+=t}return -1})(0,1)):_(-1))},[H]);let Q=(0,o.useCallback)(e=>{u(e),E&&B()},[u,E,B]);return((0,o.useLayoutEffect)(()=>{O>=0&&K.current&&K.current.scrollToRow(O)},[O]),(0,o.useEffect)(()=>{function e(e){if(!A||d.openDropdownId!==z)return;let t=(e,t)=>{let a=e;for(;a>=0&&a<W.length;){if(!1!==W[a].interactive)return a;a+=t}return -1};switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),(0,i.flushSync)(()=>{_(e=>{if(-1===e)return t(0,1);let a=t(e+1,1);return a>=0?a:e})});break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),(0,i.flushSync)(()=>{_(e=>{if(-1===e)return t(W.length-1,-1);let a=t(e-1,-1);return a>=0?a:e})});break;case"Enter":e.preventDefault(),e.stopPropagation(),O>=0&&O<W.length&&Q(W[O]);break;case"Escape":e.preventDefault(),e.stopPropagation(),B()}}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[A,O,W,Q,B,z]),f)?(0,r.jsx)("div",{className:"".concat(S?"text-sm":"text-[15px]"," text-[var(--vscode-list-inactiveSelectionForeground,rgba(255,255,255,0.2))] flex items-center ").concat(m),children:g}):v?(0,r.jsx)("div",{className:"".concat(S?"text-sm":"text-[11px]"," text-[var(--vscode-list-inactiveSelectionForeground,rgba(255,255,255,0.5))] flex items-center ").concat(m),children:k}):(0,r.jsxs)("div",{className:"relative flex items-center ".concat(m),ref:q,children:[(0,r.jsxs)("button",{onClick:()=>{if(A)B();else{if(M)return;if(d.openDropdownId&&d.openDropdownId!==z){let e=d.callbacks.get(d.openDropdownId);e&&e()}d.openDropdownId=z,T(!0)}},className:"flex outline-none border-none focus:outline-none focus:border-none items-center justify-between w-fit text-left transition-colors duration-100 max-w-[240px] overflow-hidden flex-shrink-0 group ".concat(M?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-500 hover:text-gray-400"),style:{fontSize:S?"14px":"11px"},disabled:M,children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 transition-opacity duration-100 min-w-0",children:[x,(0,r.jsxs)("div",{className:"flex gap-1 min-w-0 items-center",children:[(0,r.jsx)("span",{className:"".concat(S?"text-[14px]":"text-[11px]"," truncate"),children:C||(a?a.displayName:p)}),j&&(0,r.jsx)("div",{className:"flex items-center h-[14px] gap-1.5 border border-white/10 rounded px-1 py-0",children:(0,r.jsx)("span",{className:"text-[9px] uppercase font-bold",style:{background:"linear-gradient(to right, #81a1c1, #7d7c9b)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Max"})})]})]}),(0,r.jsx)(n.A,{className:"w-3 h-3 transition-opacity duration-100 ml-1 flex-shrink-0 ".concat(A?"rotate-180":""," ").concat(M?"text-gray-700":"text-gray-600 group-hover:text-gray-500")})]}),(A||F)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:B}),(0,r.jsxs)("div",{className:"absolute ".concat(R?"bottom-full mb-1":"top-full mt-1"," left-[-3px] z-50 overflow-hidden placeholder:text-[#3a3f46] placeholder:opacity-100 placeholder:text-[11px] bg-[#191C22] rounded-md border border-[#272C36] flex flex-col text-[11px] w-[240px]"),style:{boxShadow:"0px 36px 50px 0px rgba(0, 0, 0, 0.14), 0px 0px 3px 0px rgba(0, 0, 0, 0.25), 0px 23px 16px 6px rgba(0, 0, 0, 0.10)",opacity:1,transform:"scale(1)",transformOrigin:R?"bottom left":"top left",transition:"opacity 0.15s ease-out, transform 0.15s ease-out",animation:F?"dropdown-out 0.15s ease-out forwards":"dropdown-in 0.15s ease-out forwards"},children:[(0,r.jsxs)("div",{className:"flex gap-1 items-center border-none outline-none",style:{padding:"0px 6px",boxSizing:"border-box",margin:"2px"},children:[f?(0,r.jsx)("div",{className:"flex-shrink-0 text-[#3a3f46] animate-spin",style:{width:"11px",height:"11px"},children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-full h-full",children:(0,r.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}):(0,r.jsx)(l.A,{className:"flex-shrink-0  text-[#3a3f46]",style:{width:"11px",height:"11px"}}),(0,r.jsx)("input",{ref:Z,type:"text",placeholder:h,value:H,onChange:e=>U(e.target.value),className:"searchable-dropdown-input flex-1 min-w-0 border-none outline-none box-border",style:{fontSize:"11px",lineHeight:"15px",borderRadius:"0px",backgroundColor:"transparent",color:"rgba(216, 222, 233, 0.60)",padding:"3px 0px"}})]}),(0,r.jsx)("div",{className:"overflow-hidden",style:{padding:"2px",maxHeight:"240px",boxSizing:"border-box"},children:0===W.length?(0,r.jsx)("div",{className:"text-center",style:{padding:"12px 6px",fontSize:"11px",color:"var(--vscode-list-inactiveSelectionForeground, rgba(255, 255, 255, 0.5))"},children:H?y:0===t.length?g:w}):(0,r.jsx)(c.B8,{ref:K,height:Math.min(236,W.length*(I?34:24)),width:234,rowCount:W.length,rowHeight:I?34:24,rowRenderer:e=>{let{index:t,key:a,style:s}=e,n=W[t],l=t===O,o=!1!==n.interactive;return(0,r.jsx)("div",{style:{...s,boxSizing:"border-box"},children:o?(0,r.jsx)("button",{onClick:()=>Q(n),className:"searchable-dropdown-item px-1.5 py-0.5 flex items-center text-left box-border text-[rgba(255,255,255,0.7)] rounded-[4px] w-full text-[11px]",style:{minHeight:"".concat(I?34:24,"px"),backgroundColor:l?"rgba(255, 255, 255, 0.08)":"transparent",transition:"none"},children:(0,r.jsx)("div",{className:"w-full min-w-0",children:b?b(n,l,H):(0,r.jsx)("div",{className:"font-medium truncate",children:n.displayName})})}):(0,r.jsx)("div",{className:"px-1.5 py-0.5 flex items-center text-left box-border w-full text-[11px]",style:{minHeight:"".concat(I?34:24,"px")},children:(0,r.jsx)("div",{className:"w-full min-w-0",children:b?b(n,!1,H):(0,r.jsx)("div",{className:"font-medium truncate",children:n.displayName})})})},a)},scrollToAlignment:"auto",className:"virtualized-dropdown-list"})}),D&&(0,r.jsx)("div",{className:"border-t border-[#272C36]",children:D})]})]})]})}},30580:()=>{},60226:(e,t,a)=>{"use strict";a.d(t,{Q:()=>n});var r=a(10689),s=a(70529);function n(e){let{currentRepo:t,onRepoChange:a,disabled:n=!1}=e,{installations:l,isLoading:o,githubConnected:i}=(0,s.d)(),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null);return{selectedRepository:(0,r.useMemo)(()=>{if(t){for(let e of l){let a=e.repos.find(e=>"".concat(e.owner,"/").concat(e.name)===t);if(a)return a}if(t.includes("/")){let[e,a]=t.split("/");return{repoNodeId:t,owner:e,name:a,installationId:BigInt(0),htmlUrl:"https://github.com/".concat(t),settings:void 0}}}},[t,l]),handleRepoSelect:(0,r.useCallback)(async e=>{let r="".concat(e.owner,"/").concat(e.name);if(r!==t&&!n){d(!0),p(null);try{await a(r)}catch(e){p(e instanceof Error?e.message:"Failed to save")}finally{d(!1)}}},[t,a,n]),isSaving:c,saveError:u,setSaveError:p,isLoadingRepos:o,githubConnected:i}}},93468:(e,t,a)=>{"use strict";a.d(t,{XJ:()=>i,_U:()=>c,m7:()=>d});var r=a(10689),s=a(90037);class n{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("API call failed: ".concat(a.statusText),{cause:a});return a.json()}async getSlackSettings(){let e=await this.makeRequest("/api/dashboard/get-slack-settings");return s.no.fromJson(e)}async getSlackTeamSettings(e){let t=new s.YAE({...void 0!==e?{teamId:e}:{}}),a=await this.makeRequest("/api/dashboard/get-slack-team-settings",t.toJson());return s.YyD.fromJson(a)}async updateSlackTeamSettings(e,t,a,r,n,l){let o=new s.HFD({defaultRepo:e,defaultBranch:t,defaultModel:a,shareSummary:r,shareSummaryInExternalChannel:n,...void 0!==l?{teamId:l}:{}});await this.makeRequest("/api/dashboard/update-slack-team-settings",o.toJson())}async getSlackInstallUrl(e){let t=new s.St({...void 0!==e?{teamId:e}:{}}),a=await this.makeRequest("/api/dashboard/get-slack-install-url",t.toJson());return s.QKj.fromJson(a)}async getSlackModelOptions(){let e=new s.lym({}),t=await this.makeRequest("/api/dashboard/get-slack-model-options",e.toJson());return s.ddf.fromJson(t)}async getSlackUserSettings(){let e=new s.e0r({teamId:void 0}),t=await this.makeRequest("/api/dashboard/get-slack-user-settings",e.toJson());return s.ewI.fromJson(t)}async updateSlackUserSettings(e,t,a){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=new s.F5_({defaultRepo:e,defaultBranch:t,defaultModel:a,teamId:void 0,openPrByDefault:r});await this.makeRequest("/api/dashboard/update-slack-user-settings",n.toJson())}async unlinkSlackAccess(){let e=new s.h0F({});await this.makeRequest("/api/dashboard/unlink-slack-access",e.toJson())}}let l=new n;var o=a(12061);function i(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),[n,o]=(0,r.useState)("");(0,r.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await l.getSlackInstallUrl();o(e.url),t(!0)}catch(e){s(e instanceof Error?e.message:"Failed to load Slack settings"),console.error("Error loading Slack settings:",e)}finally{t(!0)}};return{isEnabled:e,error:a,slackInstallUrl:n,refreshInstallUrl:async()=>{try{let e=await l.getSlackInstallUrl();return o(e.url),e.url}catch(e){throw s(e instanceof Error?e.message:"Failed to refresh Slack install URL"),console.error("Error refreshing Slack install URL:",e),e}}}}function c(){let[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(!1),[h,m]=(0,r.useState)([]),[x,f]=(0,r.useState)(!0),[g,w]=(0,r.useState)(null),{team:y}=(0,o.M)();(0,r.useEffect)(()=>{b(),v()},[null==y?void 0:y.id]);let b=async()=>{try{if(!(null==y?void 0:y.id))return;f(!0),w(null);let e=await l.getSlackTeamSettings(null==y?void 0:y.id);t(e.defaultRepo),s(e.defaultBranch),i(e.defaultModel),d(e.shareSummary),p(e.shareSummaryInExternalChannel)}catch(e){w(e instanceof Error?e.message:"Failed to load Slack settings"),console.error("Error loading Slack settings:",e)}finally{f(!1)}},v=async()=>{try{let e=await l.getSlackModelOptions();m(e.modelOptions)}catch(e){console.error("Error loading Slack model options:",e)}},k=async e=>{try{w(null),await l.updateSlackTeamSettings(e,a,n,c,u,null==y?void 0:y.id),t(e)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}},N=async t=>{try{w(null),await l.updateSlackTeamSettings(e,t,n,c,u,null==y?void 0:y.id),s(t)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}},S=async t=>{try{w(null),await l.updateSlackTeamSettings(e,a,t,c,u,null==y?void 0:y.id),i(t)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}},j=async t=>{try{w(null),await l.updateSlackTeamSettings(e,a,n,t,u,null==y?void 0:y.id),d(t)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}},C=async t=>{try{w(null),await l.updateSlackTeamSettings(e,a,n,c,t,null==y?void 0:y.id),p(t)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}};return{defaultRepo:e,defaultBranch:a,defaultModel:n,shareSummary:c,shareSummaryInExternalChannel:u,modelOptions:h,isLoading:x,error:g,updateDefaultRepo:k,updateDefaultBranch:N,updateDefaultModel:S,updateShareSummary:j,updateShareSummaryInExternalChannel:C,updateSlackSettings:async(e,a,r,n,o)=>{try{w(null),await l.updateSlackTeamSettings(e,a,r,n,o,null==y?void 0:y.id),t(e),s(a),i(r),d(n),p(o)}catch(e){throw w(e instanceof Error?e.message:"Failed to update Slack settings"),console.error("Error updating Slack settings:",e),await b(),e}}}}function d(){let[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[i,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[p,h]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{w(),y()},[]);let w=async()=>{try{u(!0),h(null);let e=await l.getSlackUserSettings();t(e.defaultRepo),s(e.defaultBranch),o(e.defaultModel),x(e.hasSlackAuth),g(e.openPrByDefault),u(!1)}catch(e){h(e instanceof Error?e.message:"Failed to load user settings")}finally{u(!1)}},y=async()=>{try{let e=await l.getSlackModelOptions();c(e.modelOptions)}catch(e){console.error("Error loading Slack model options:",e)}},b=async e=>{try{h(null),await l.updateSlackUserSettings(e,a,n,f),t(e)}catch(e){throw h(e instanceof Error?e.message:"Failed to update user settings"),console.error("Error updating user settings:",e),await w(),e}},v=async t=>{try{h(null),await l.updateSlackUserSettings(e,t,n,f),s(t)}catch(e){throw h(e instanceof Error?e.message:"Failed to update user settings"),console.error("Error updating user settings:",e),await w(),e}},k=async t=>{try{h(null),await l.updateSlackUserSettings(e,a,t,f),o(t)}catch(e){throw h(e instanceof Error?e.message:"Failed to update user settings"),console.error("Error updating user settings:",e),await w(),e}},N=async t=>{try{h(null),await l.updateSlackUserSettings(e,a,n,t),g(t)}catch(e){throw h(e instanceof Error?e.message:"Failed to update user settings"),console.error("Error updating user settings:",e),await w(),e}};return{defaultRepo:e,defaultBranch:a,defaultModel:n,openPrByDefault:f,modelOptions:i,isLoading:d,error:p,hasSlackAuth:m,updateDefaultRepo:b,updateDefaultBranch:v,updateDefaultModel:k,updateOpenPrByDefault:N,unlinkSlackAccess:async()=>{try{h(null),await l.unlinkSlackAccess(),x(!1)}catch(e){throw h(e instanceof Error?e.message:"Failed to unlink Slack access"),console.error("Error unlinking Slack access:",e),await w(),e}}}}}}]);